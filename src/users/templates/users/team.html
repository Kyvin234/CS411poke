{% extends "pokewiki/base.html" %}
{% comment %} {% load crispy_forms_tags %} {% endcomment %}
{% block content %}
    <div class="content-section">
        <h1> {{ user.username }}'s team </h1>
            <form action="{% url 'team-create'%}">
            <input type="submit" value="create your team">
        </form>
    </div>
    {% for row in team_entry %}
    {{row.team_comp}}
        <div class="content-section">
            <table class="table table-hover" id="myTable">
                <thead>
                    <tr class = "header">
                        <td>{{row.team_name}}</td>
                        {% for key,value in row.team_comp.items %}
                            {% if value.name %}
                                <td><img src="../static/pokewiki/pokemon-icon/{{value.name}}.png" alt="N/A"></td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class='team-body'>
                    <tr>
                        <td>name</td>
                        {% for key,value in row.team_comp.items %}
                            <td>{{value.name}}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>nature</td>
                        {% for key,value in row.team_comp.items %}
                            <td>{{value.nature}}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>ability</td>
                        {% for key,value in row.team_comp.items %}
                            <td>{{value.ability}}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>item</td>
                        {% for key,value in row.team_comp.items %}
                            {% if value.item %}
                                <td><img src="../static/pokewiki/item-icon/{{value.item}}.png" alt="N/A"></td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>move</td>
                    </tr>
                    <tr>
                        <td>EVs</td>
                        {% for key,value in row.team_comp.items %}
                            <td>{{value.EV}}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>IVs</td>
                        {% for key,value in row.team_comp.items %}
                            <td>{{value.IV}}</td>
                        {% endfor %}
                    </tr>
                    <tr>
                        <td>description</td>
                        <td colspan="4"><p>{{row.description}}</p></td>
                    </tr>
                    <tr>
                        <td colspan="5"></td>
                        <td>
                            <form action="{% url 'team-update' pk=row.id %}">
                                <input type="submit" value="update">
                            </form>
                        </td>
                        <td>
                            <form action="{% url 'team-delete' pk=row.id %}">
                                <input type="submit" value="delete">
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    {% endfor %}
{% endblock content %}
{% block extra_js %}
    <script> 
        var main = function() 
        {
            $("thead").on("click", function() 
            {
                $(this).parents("table").find("tbody").toggle();
            });
        }
        $(document).ready(main);
    </script>  
{% endblock extra_js %}